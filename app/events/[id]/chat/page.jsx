'use client';
import {useEffect,useRef,useState} from 'react'; import ChatMessage from '@/components/ChatMessage';
const initial=[{id:1,me:false,text:'Sei sicuro che parli di me?',time:'22:15',avatar:'/assets/u3.jpg'},{id:2,me:true,text:'ti ho vista prima',time:'22:16'},{id:3,me:false,text:'Ah si? Non mi confondi con la mia amica?\nche avevo addosso?',time:'23:40',avatar:'/assets/u3.jpg'},{id:4,me:true,text:'vestito nero',time:'23:41'}];
export default function Chat(){ const[msgs,setMsgs]=useState(initial); const[text,setText]=useState(''); const endRef=useRef(null); useEffect(()=>{endRef.current?.scrollIntoView({behavior:'smooth'})},[msgs]); const send=e=>{e.preventDefault(); if(!text.trim())return; setMsgs(m=>[...m,{id:Date.now(),me:true,text, time:new Date().toLocaleTimeString().slice(0,5)}]); setText(''); }; return(<main className='container py-6'><header className='flex items-center gap-3 mb-4'><a href='..' className='text-white/70'>{'<'} </a><h1 className='text-xl font-semibold'>Chat evento</h1></header><div className='flex flex-col gap-3 min-h-[65vh]'>{msgs.map(m=><ChatMessage key={m.id} {...m}/>) }<div ref={endRef}/></div><form onSubmit={send} className='mt-4 flex items-center gap-2'><input className='flex-1 bg-[color:var(--card)] border border-white/10 rounded-2xl px-4 py-3' placeholder='Aa' value={text} onChange={e=>setText(e.target.value)}/><button className='px-4 py-3 rounded-2xl bg-blue-600'>Invia</button></form></main>)}
